# ğŸ”Œ ë¯¸ë“¤ì›¨ì–´ëŠ” ì–´ë””ì„œ í˜¸ì¶œë˜ëŠ”ê°€? (ìë™ ì‹¤í–‰ ì›ë¦¬)

> **ëª©í‘œ:** ë¯¸ë“¤ì›¨ì–´ê°€ ì–´ë””ì„œ ë“±ë¡ë˜ê³ , ëˆ„ê°€ ì–¸ì œ í˜¸ì¶œí•˜ëŠ”ì§€ ëª…í™•íˆ ì´í•´í•˜ê¸°

---

## ğŸ¯ ë¯¸ë“¤ì›¨ì–´ í˜¸ì¶œ ìœ„ì¹˜ (í•œ ë²ˆì—!)

```javascript
// âœ… ë¯¸ë“¤ì›¨ì–´ëŠ” backend/index.jsì—ì„œ ë“±ë¡ë¨

const express = require("express");
const app = express();
const parseFormData = require("./middleware/parseFormData");

// ğŸ‘‡ ì—¬ê¸°ì„œ ë“±ë¡!
app.use(parseFormData);  // â† ë¯¸ë“¤ì›¨ì–´ ë“±ë¡

const postsRouter = require("./routes/posts");
app.use("/api/posts", postsRouter);

app.listen(3001, () => {
  console.log("ì„œë²„ ì‹œì‘");
});
```

**ê·¸ëŸ°ë° ëˆ„ê°€ í˜¸ì¶œí•˜ëŠ”ê°€?**

```
           í”„ëŸ°íŠ¸ ìš”ì²­ (POST /api/posts)
                    â†“
        Express í”„ë ˆì„ì›Œí¬ê°€ ìë™ìœ¼ë¡œ
                    â†“
           parseFormData ë¯¸ë“¤ì›¨ì–´ í˜¸ì¶œ
                    â†“
        req.body, req.files ì„¤ì •
                    â†“
           next() í˜¸ì¶œ
                    â†“
        routes/posts.jsì˜ í•¸ë“¤ëŸ¬ ì‹¤í–‰
```

**Expressê°€ ìë™ìœ¼ë¡œ í˜¸ì¶œí•œë‹¤!** ğŸ¤–

---

## ğŸ“ ë¯¸ë“¤ì›¨ì–´ í˜¸ì¶œ ìˆœì„œ (ìƒì„¸)

### **1ï¸âƒ£ backend/index.js - ë¯¸ë“¤ì›¨ì–´ ë“±ë¡**

```javascript
// backend/index.js

const express = require("express");
const cors = require("cors");
const parseFormData = require("./middleware/parseFormData");
const postsRouter = require("./routes/posts");

const app = express();

// ========================================
// ë¯¸ë“¤ì›¨ì–´ ë“±ë¡ (ìˆœì„œê°€ ì¤‘ìš”!)
// ========================================

// 1ï¸âƒ£ CORS ë¯¸ë“¤ì›¨ì–´
app.use(cors({
  origin: ["http://localhost:3000", "https://jiwooresume.vercel.app"],
  credentials: true
}));
console.log("âœ… CORS ë¯¸ë“¤ì›¨ì–´ ë“±ë¡");

// 2ï¸âƒ£ JSON ë¯¸ë“¤ì›¨ì–´
app.use(express.json());
console.log("âœ… JSON ë¯¸ë“¤ì›¨ì–´ ë“±ë¡");

// 3ï¸âƒ£ FormData ë¯¸ë“¤ì›¨ì–´ â­ (ìš°ë¦¬ê°€ ë§Œë“  ê²ƒ!)
app.use(parseFormData);
console.log("âœ… parseFormData ë¯¸ë“¤ì›¨ì–´ ë“±ë¡");

// 4ï¸âƒ£ ë¼ìš°íŠ¸ ë“±ë¡
app.use("/api/posts", postsRouter);
console.log("âœ… routes/posts.js ë“±ë¡");

// ========================================
// ì´ ì‹œì ì— ì„œë²„ëŠ” ì¤€ë¹„ë¨ (ì•„ì§ ìš”ì²­ ì•ˆ ë“¤ì–´ì˜´)
// ========================================

app.listen(3001, () => {
  console.log("ğŸš€ ì„œë²„ ì‹œì‘: http://localhost:3001");
});

// ========================================
// ì´ì œ ìš”ì²­ì„ ê¸°ë‹¤ë¦¼
// ========================================
```

### **2ï¸âƒ£ í”„ëŸ°íŠ¸ì—ì„œ ìš”ì²­ ì „ì†¡**

```javascript
// í”„ëŸ°íŠ¸: api.js

export const createPost = async (postData) => {
  const formData = new FormData();
  formData.append("title", "ì œëª©");
  formData.append("images", Fileê°ì²´);

  // ğŸ“¤ ìš”ì²­ ì „ì†¡
  const response = await api.post("/posts", formData);
  //                                ^^^^^^
  //                         /api/postsë¡œ ìš”ì²­
};
```

### **3ï¸âƒ£ Expressê°€ ìš”ì²­ì„ ë°›ìŒ**

```
í”„ëŸ°íŠ¸: axios.post("/api/posts", formData)
           â†“ (HTTPS ì „ì†¡)
ë°±: http://localhost:3001/api/posts (ìˆ˜ì‹ )
           â†“
Express í”„ë ˆì„ì›Œí¬:
"ì–´? /api/posts ìš”ì²­ì´ ë“¤ì–´ì™”ë„¤!"
"ë¯¸ë“¤ì›¨ì–´ë“¤ì´ ìˆë˜ë°, ë¨¼ì € ì‹¤í–‰í•´ì•¼ì§€"
```

### **4ï¸âƒ£ Expressê°€ ë¯¸ë“¤ì›¨ì–´ ì²´ì¸ ì‹¤í–‰**

```javascript
// Expressì˜ ë‚´ë¶€ ë™ì‘ (ìš°ë¦¬ê°€ ë³¼ ìˆ˜ ì—†ëŠ” ë¶€ë¶„)

// ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´:
const req = { /* ìš”ì²­ ì •ë³´ */ };
const res = { /* ì‘ë‹µ ê°ì²´ */ };

// 1ï¸âƒ£ CORS ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰
cors(req, res, () => {
  // CORS ì²´í¬
  
  // 2ï¸âƒ£ JSON ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰
  express.json()(req, res, () => {
    // JSON í˜•ì‹? ì•„ë‹ˆë©´ í†µê³¼
    
    // 3ï¸âƒ£ parseFormData ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰ â­
    parseFormData(req, res, () => {
      // multipart/form-data? 
      // ë§ìœ¼ë©´ íŒŒì‹±!
      // req.body = {...}
      // req.files = [...]
      
      // 4ï¸âƒ£ ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ ì‹¤í–‰
      const handler = postsRouter.post;
      handler(req, res);  // â† routes/posts.jsì˜ POST í•¸ë“¤ëŸ¬
    });
  });
});
```

**ê° ë¯¸ë“¤ì›¨ì–´ê°€ `next()` í˜¸ì¶œí•˜ë©´ ë‹¤ìŒìœ¼ë¡œ ì´ë™!**

---

## ğŸ”„ ë¯¸ë“¤ì›¨ì–´ íë¦„ë„ (ìì„¸íˆ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í”„ëŸ°íŠ¸: axios.post("/posts", formData)      â”‚
â”‚         (HTTPS POST ìš”ì²­)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ (ì¸í„°ë„· ì „ì†¡)
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë°±: Express ì„œë²„ê°€ ìš”ì²­ ìˆ˜ì‹                  â”‚
â”‚                                             â”‚
â”‚ if (method === "POST" && url === "/posts") â”‚
â”‚   // ë“±ë¡ëœ ë¯¸ë“¤ì›¨ì–´ë“¤ ì‹¤í–‰!                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“ ë¯¸ë“¤ì›¨ì–´ ì²´ì¸ ì‹œì‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1ï¸âƒ£ CORS ë¯¸ë“¤ì›¨ì–´                           â”‚
â”‚    app.use(cors(...))                       â”‚
â”‚                                             â”‚
â”‚    - ìš”ì²­ ì¶œì²˜ í™•ì¸: http://localhost:3000? â”‚
â”‚    - âœ… í—ˆìš©ë¨                              â”‚
â”‚    - next() í˜¸ì¶œ                            â”‚
â”‚    - â­ï¸  ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¡œ ì´ë™               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2ï¸âƒ£ JSON ë¯¸ë“¤ì›¨ì–´                           â”‚
â”‚    app.use(express.json())                  â”‚
â”‚                                             â”‚
â”‚    - Content-Type í™•ì¸                      â”‚
â”‚    - application/json? âŒ (FormDataë‹ˆê¹Œ)   â”‚
â”‚    - ì²˜ë¦¬ ì•ˆ í•¨                              â”‚
â”‚    - next() í˜¸ì¶œ                            â”‚
â”‚    - â­ï¸  ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¡œ ì´ë™               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3ï¸âƒ£ parseFormData ë¯¸ë“¤ì›¨ì–´ â­              â”‚
â”‚    app.use(parseFormData)                   â”‚
â”‚                                             â”‚
â”‚    - Content-Type í™•ì¸                      â”‚
â”‚    - multipart/form-data? âœ…                â”‚
â”‚    - ì²˜ë¦¬ ì‹œì‘!                             â”‚
â”‚    - Busboyë¡œ íŒŒì‹±                          â”‚
â”‚    - req.body = {title, content}            â”‚
â”‚    - req.files = [{buffer}]                 â”‚
â”‚    - next() í˜¸ì¶œ                            â”‚
â”‚    - â­ï¸  ë‹¤ìŒìœ¼ë¡œ ì´ë™                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4ï¸âƒ£ ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬                           â”‚
â”‚    routes/posts.jsì˜ POST í•¸ë“¤ëŸ¬            â”‚
â”‚                                             â”‚
â”‚    router.post("/", async (req, res) => {  â”‚
â”‚      // req.bodyê°€ ì¤€ë¹„ë˜ì–´ ìˆìŒ!           â”‚
â”‚      const { title } = req.body;            â”‚
â”‚      // req.filesê°€ ì¤€ë¹„ë˜ì–´ ìˆìŒ!          â”‚
â”‚      const buffer = req.files[0].buffer;    â”‚
â”‚                                             â”‚
â”‚      // ë¡œì§ ì‹¤í–‰                           â”‚
â”‚      await uploadImageBuffer(buffer);       â”‚
â”‚      await Post.create({...});              â”‚
â”‚      res.json({success: true});             â”‚
â”‚    });                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‘ë‹µ ë°˜í™˜                                    â”‚
â”‚                                             â”‚
â”‚ HTTP/1.1 201 Created                        â”‚
â”‚ Content-Type: application/json              â”‚
â”‚ {                                           â”‚
â”‚   "success": true,                          â”‚
â”‚   "data": {...}                             â”‚
â”‚ }                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ (ì¸í„°ë„· ì „ì†¡)
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í”„ëŸ°íŠ¸: ì‘ë‹µ ìˆ˜ì‹                            â”‚
â”‚                                             â”‚
â”‚ const response = await createPost();        â”‚
â”‚ // ì‘ë‹µ ì²˜ë¦¬                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¤– Expressê°€ ìë™ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ì›ë¦¬

### **ë¯¸ë“¤ì›¨ì–´ ë“±ë¡ (index.js)**

```javascript
app.use(parseFormData);

// ì´ê²ƒì€ ë‹¤ìŒì„ ì˜ë¯¸í•¨:
// "ëª¨ë“  ìš”ì²­ì— ëŒ€í•´, ë¼ìš°íŠ¸ ì „ì— parseFormDataë¥¼ ì‹¤í–‰í•´!"

// ë‚´ë¶€ì ìœ¼ë¡œëŠ”:
app._middleware = [
  cors,           // 1ë²ˆì§¸
  express.json,   // 2ë²ˆì§¸
  parseFormData,  // 3ë²ˆì§¸ â† ìš°ë¦¬ê°€ ë“±ë¡í•œ ê²ƒ
];

app._routes = [
  { method: "POST", path: "/api/posts", handler: postsHandler },
];
```

### **ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œ**

```javascript
// í”„ëŸ°íŠ¸ì—ì„œ POST /api/posts ìš”ì²­

// Expressì˜ ë‚´ë¶€ ì²˜ë¦¬:
function handleRequest(req, res) {
  // 1. ë¯¸ë“¤ì›¨ì–´ë“¤ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰
  let middlewareIndex = 0;

  function next() {
    if (middlewareIndex < app._middleware.length) {
      const middleware = app._middleware[middlewareIndex++];
      middleware(req, res, next);  // â† ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰!
    } else {
      // ëª¨ë“  ë¯¸ë“¤ì›¨ì–´ê°€ ì™„ë£Œë¨
      // ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ ì‹¤í–‰
      const handler = app._routes[0].handler;
      handler(req, res);
    }
  }

  next();  // â† ì²« ë²ˆì§¸ ë¯¸ë“¤ì›¨ì–´ë¶€í„° ì‹œì‘
}

handleRequest(req, res);
```

**ê²°ë¡ : Expressê°€ ìë™ìœ¼ë¡œ í˜¸ì¶œí•œë‹¤!**
**ìš°ë¦¬ëŠ” ë“±ë¡ë§Œ í•˜ë©´ ë¨!**

---

## âœ… ì •ë¦¬: ë¯¸ë“¤ì›¨ì–´ í˜¸ì¶œ ìœ„ì¹˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ë“±ë¡ ìœ„ì¹˜      â”‚   ë“±ë¡ ë°©ì‹       â”‚   í˜¸ì¶œ ìœ„ì¹˜      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ backend/        â”‚ app.use(          â”‚ Expressê°€        â”‚
â”‚ index.js        â”‚   parseFormData   â”‚ ìë™ìœ¼ë¡œ         â”‚
â”‚                 â”‚ )                 â”‚ (ìˆ˜ë™ í˜¸ì¶œ X)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1ï¸âƒ£ ë“±ë¡:
   const parseFormData = require("./middleware/parseFormData");
   app.use(parseFormData);

2ï¸âƒ£ í˜¸ì¶œ:
   Expressê°€ ìë™ìœ¼ë¡œ í˜¸ì¶œ
   (í”„ëŸ°íŠ¸ ìš”ì²­ì´ ì˜¬ ë•Œë§ˆë‹¤)

3ï¸âƒ£ ìˆœì„œ:
   ìš”ì²­ â†’ CORS â†’ JSON â†’ parseFormData â†’ ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬
```

---

## ğŸ”— ë¯¸ë“¤ì›¨ì–´ ì²´ì¸ (ì™„ì „í•œ ì˜ˆì‹œ)

```javascript
// ========================================
// 1ï¸âƒ£ backend/index.js - ëª¨ë“  ë¯¸ë“¤ì›¨ì–´ ë“±ë¡
// ========================================

const express = require("express");
const cors = require("cors");
const parseFormData = require("./middleware/parseFormData");
const postsRouter = require("./routes/posts");

const app = express();

// CORS
app.use(cors());
// JSON
app.use(express.json());
// FormData
app.use(parseFormData);  // â­ ë“±ë¡
// ë¼ìš°íŠ¸
app.use("/api/posts", postsRouter);

app.listen(3001);

// ========================================
// 2ï¸âƒ£ í”„ëŸ°íŠ¸ì—ì„œ ìš”ì²­
// ========================================

// í”„ëŸ°íŠ¸: api.js
axios.post("/api/posts", formData);
// POST /api/posts ìš”ì²­ ë°œì†¡

// ========================================
// 3ï¸âƒ£ Expressê°€ ìš”ì²­ ìˆ˜ì‹  (ìë™ ì²˜ë¦¬)
// ========================================

// Express ë‚´ë¶€:
// "POST /api/posts ìš”ì²­ì´ ë“¤ì–´ì™”ë‹¤!"
// "ë“±ë¡ëœ ë¯¸ë“¤ì›¨ì–´ë“¤ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•˜ì"

// ğŸ”µ CORS ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰
function cors(req, res, next) {
  // ìš”ì²­ ì¶œì²˜ í™•ì¸
  next();
}

// ğŸ”µ JSON ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰
function json(req, res, next) {
  // JSON? ì•„ë‹ˆë©´ í†µê³¼
  next();
}

// ğŸ”µ parseFormData ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰ â­
function parseFormData(req, res, next) {
  // multipart/form-data íŒŒì‹±
  // req.body = {...}
  // req.files = [...]
  next();
}

// ğŸ”µ ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ ì‹¤í–‰
function postsHandler(req, res) {
  // ì—¬ê¸°ì„œ ë¡œì§ ì‹¤í–‰
  const { title } = req.body;  // req.bodyê°€ ì´ë¯¸ ìˆìŒ!
  const file = req.files[0];   // req.filesê°€ ì´ë¯¸ ìˆìŒ!
}

// ========================================
// 4ï¸âƒ£ ì‘ë‹µ ë°˜í™˜
// ========================================

res.json({success: true});
// í”„ëŸ°íŠ¸ì— ì‘ë‹µ ì „ì†¡
```

---

## ğŸ¯ í•µì‹¬ í¬ì¸íŠ¸

```javascript
âŒ ë¯¸ë“¤ì›¨ì–´ëŠ” ìˆ˜ë™ìœ¼ë¡œ í˜¸ì¶œí•˜ì§€ ì•ŠìŒ:
function handler(req, res) {
  parseFormData(req, res, () => {  // â† ì´ë ‡ê²Œ X
    // ...
  });
}

âœ… ë¯¸ë“¤ì›¨ì–´ëŠ” app.use()ë¡œ ë“±ë¡í•˜ê³  Expressê°€ ìë™ í˜¸ì¶œ:
app.use(parseFormData);  // â† ë“±ë¡
// Expressê°€ ìš”ì²­ë§ˆë‹¤ ìë™ìœ¼ë¡œ í˜¸ì¶œë¨!

// ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ë¯¸ë“¤ì›¨ì–´ê°€ ì´ë¯¸ ì²˜ë¦¬í•œ í›„ ë°›ìŒ:
router.post("/", (req, res) => {
  // req.body, req.filesê°€ ì´ë¯¸ ì¤€ë¹„ë˜ì–´ ìˆìŒ!
});
```

---

## ğŸ“Š ì‹¤ì œ ìš”ì²­ ìƒëª…ì£¼ê¸°

```
ì‹œê°„ â†’

T1: í”„ëŸ°íŠ¸ì—ì„œ FormData ì „ì†¡
    axios.post("/api/posts", formData)
    â†“

T2: ë°±ì—”ë“œê°€ ìš”ì²­ ìˆ˜ì‹ 
    Expressê°€ ë¯¸ë“¤ì›¨ì–´ ì²´ì¸ ì‹œì‘
    â†“

T3: CORS ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰ (1ms)
    â†“

T4: JSON ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰ (0.5ms)
    â†“

T5: parseFormData ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰ (2ms) â­
    Busboyë¡œ íŒŒì‹±
    req.body, req.files ì„¤ì •
    â†“

T6: ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ ì‹¤í–‰ (100ms)
    JWT ê²€ì¦
    Cloudinary ì—…ë¡œë“œ
    MongoDB ì €ì¥
    â†“

T7: ì‘ë‹µ ë°˜í™˜
    res.json({...})
    â†“

T8: í”„ëŸ°íŠ¸ê°€ ì‘ë‹µ ìˆ˜ì‹ 
    const response = await createPost()
    // ì‘ë‹µ ì²˜ë¦¬
```

---

## ğŸš€ ê²°ë¡ 

### **ë¯¸ë“¤ì›¨ì–´ í˜¸ì¶œ íë¦„**

1. **ë“±ë¡** (backend/index.js):
   ```javascript
   app.use(parseFormData);
   ```

2. **í˜¸ì¶œ** (ìë™, Expressê°€ í•¨):
   ```
   ìš”ì²­ ìˆ˜ì‹  â†’ ë¯¸ë“¤ì›¨ì–´ ì²´ì¸ ì‹œì‘ â†’ parseFormData ì‹¤í–‰
   ```

3. **ì‹¤í–‰** (middleware/parseFormData.js):
   ```javascript
   function parseFormData(req, res, next) {
     // ì²˜ë¦¬
     next();
   }
   ```

4. **ê²°ê³¼** (ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ì‚¬ìš©):
   ```javascript
   const { title } = req.body;  // ì‚¬ìš© ê°€ëŠ¥!
   const file = req.files[0];   // ì‚¬ìš© ê°€ëŠ¥!
   ```

**"ë¯¸ë“¤ì›¨ì–´ëŠ” ë“±ë¡í•˜ë©´ Expressê°€ ìë™ìœ¼ë¡œ í˜¸ì¶œí•œë‹¤!"** ğŸ¤–

