# ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ ìƒì„¸ ì½”ë“œ ì„¤ëª… ë…¸íŠ¸

> 2025-12-29 ì‘ì—…  
> ê²Œì‹œë¬¼ì— ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ ì¶”ê°€ (ì›¹/ëª¨ë°”ì¼ ì§€ì›)

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
backend/
â”œâ”€â”€ middleware/
â”‚   â””â”€â”€ upload.js          â† ğŸ†• Multer ì„¤ì • (íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬)
â”œâ”€â”€ models/
â”‚   â””â”€â”€ Post.js            â† ğŸ”„ images í•„ë“œ ì¶”ê°€
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ posts.js           â† ğŸ”„ ì´ë¯¸ì§€ ì—…ë¡œë“œ ë¯¸ë“¤ì›¨ì–´ ì ìš©
â”œâ”€â”€ uploads/               â† ğŸ†• ì´ë¯¸ì§€ ì €ì¥ í´ë” (ìë™ ìƒì„±)
â””â”€â”€ index.js               â† ğŸ”„ ì •ì  íŒŒì¼ ì„œë¹™ ì¶”ê°€

frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ PostCreate.jsx â† ğŸ”„ ì´ë¯¸ì§€ ì„ íƒ & ë¯¸ë¦¬ë³´ê¸°
â”‚   â”‚   â”œâ”€â”€ PostDetail.jsx â† ğŸ”„ ì´ë¯¸ì§€ í‘œì‹œ
â”‚   â”‚   â””â”€â”€ PostList.jsx   â† ğŸ”„ ì¸ë„¤ì¼ í‘œì‹œ
â”‚   â””â”€â”€ api.js             â† ğŸ”„ FormData ì²˜ë¦¬
```

---

## ğŸ”§ ë°±ì—”ë“œ ì½”ë“œ (ìƒì„¸ ì£¼ì„ í¬í•¨)

### 1ï¸âƒ£ Multer ë¯¸ë“¤ì›¨ì–´ (`backend/middleware/upload.js`)

**ì—­í• **: íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬ (ì €ì¥ ìœ„ì¹˜, íŒŒì¼ëª…, ê²€ì¦)

```javascript
// ============================================================
// ğŸ“· ì´ë¯¸ì§€ ì—…ë¡œë“œ ë¯¸ë“¤ì›¨ì–´ (Multer)
// ============================================================
// Multer: Node.jsì—ì„œ multipart/form-dataë¥¼ ì²˜ë¦¬í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´
// ê¸°ë³¸ ExpressëŠ” íŒŒì¼ ì—…ë¡œë“œë¥¼ ì²˜ë¦¬í•˜ì§€ ëª»í•˜ë¯€ë¡œ Multer í•„ìš”
const multer = require("multer");
const path = require("path");
const fs = require("fs");

// ============================================================
// uploads ë””ë ‰í† ë¦¬ ìƒì„± (ì—†ìœ¼ë©´ ìë™ ìƒì„±)
// ============================================================
const uploadDir = path.join(__dirname, "../uploads");
// path.join(): ê²½ë¡œë¥¼ OSì— ë§ê²Œ ìë™ ê²°í•©
// __dirname: í˜„ì¬ íŒŒì¼(upload.js)ì´ ìœ„ì¹˜í•œ ë””ë ‰í† ë¦¬
// ê²°ê³¼: /Users/.../Blog/backend/uploads

if (!fs.existsSync(uploadDir)) {
  // í´ë”ê°€ ì—†ìœ¼ë©´ ìƒì„±
  fs.mkdirSync(uploadDir, { recursive: true });
  // recursive: true â†’ ì¤‘ê°„ ê²½ë¡œë„ ìë™ ìƒì„±
}

// ============================================================
// ì €ì¥ ì„¤ì • (DiskStorage)
// ============================================================
const storage = multer.diskStorage({
  // 1ï¸âƒ£ íŒŒì¼ ì €ì¥ ìœ„ì¹˜ ì„¤ì •
  destination: (req, file, cb) => {
    // cb(ì—ëŸ¬, ì €ì¥ê²½ë¡œ)
    cb(null, uploadDir); // ì—ëŸ¬ ì—†ìŒ(null), uploadDirì— ì €ì¥
  },
  
  // 2ï¸âƒ£ íŒŒì¼ëª… ì„¤ì • (ì¤‘ë³µ ë°©ì§€ ì¤‘ìš”!)
  filename: (req, file, cb) => {
    // í˜„ì¬ ì‹œê°„ + ëœë¤ê°’ìœ¼ë¡œ ê³ ìœ í•œ íŒŒì¼ëª… ìƒì„±
    const uniqueSuffix = Date.now() + "-" + Math.round(Math.random() * 1e9);
    // Date.now(): 1735477890123 (ë°€ë¦¬ì´ˆ íƒ€ì„ìŠ¤íƒ¬í”„)
    // Math.random() * 1e9: 0~999999999 ëœë¤ ìˆ«ì
    
    const ext = path.extname(file.originalname); // í™•ì¥ì ì¶”ì¶œ (.jpg, .png ë“±)
    const basename = path.basename(file.originalname, ext); // íŒŒì¼ëª… (í™•ì¥ì ì œì™¸)
    
    // ìµœì¢… íŒŒì¼ëª…: "ì›ë³¸íŒŒì¼ëª…-1735477890123-987654321.jpg"
    cb(null, \`\${basename}-\${uniqueSuffix}\${ext}\`);
    
    // ì˜ˆì‹œ:
    // ì›ë³¸: "my-photo.jpg"
    // ê²°ê³¼: "my-photo-1735477890123-987654321.jpg"
  },
});

// ============================================================
// íŒŒì¼ í•„í„° (ì´ë¯¸ì§€ë§Œ í—ˆìš©)
// ============================================================
const fileFilter = (req, file, cb) => {
  // MIME íƒ€ì…ìœ¼ë¡œ íŒŒì¼ ì¢…ë¥˜ í™•ì¸ (í™•ì¥ìëŠ” ì†ì¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ MIME íƒ€ì… ì‚¬ìš©)
  const allowedMimes = [
    "image/jpeg",  // .jpg, .jpeg
    "image/jpg",   // .jpg
    "image/png",   // .png
    "image/gif",   // .gif
    "image/webp"   // .webp (ìµœì‹  í˜•ì‹)
  ];
  
  if (allowedMimes.includes(file.mimetype)) {
    // MIME íƒ€ì…ì´ í—ˆìš© ëª©ë¡ì— ìˆìœ¼ë©´ ì—…ë¡œë“œ í—ˆìš©
    cb(null, true); // ì—ëŸ¬ ì—†ìŒ(null), í—ˆìš©(true)
  } else {
    // í—ˆìš©ë˜ì§€ ì•Šì€ íŒŒì¼ í˜•ì‹
    cb(
      new Error("ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤ (jpg, png, gif, webp)"),
      false // ê±°ë¶€(false)
    );
  }
};

// ============================================================
// Multer ì¸ìŠ¤í„´ìŠ¤ ìƒì„± (ìµœì¢… ì„¤ì •)
// ============================================================
const upload = multer({
  storage: storage,        // ì €ì¥ ì„¤ì • (ìœ„ì—ì„œ ì •ì˜)
  fileFilter: fileFilter,  // íŒŒì¼ íƒ€ì… í•„í„° (ìœ„ì—ì„œ ì •ì˜)
  limits: {
    fileSize: 5 * 1024 * 1024, // 5MB ì œí•œ
    // 1024 bytes = 1KB
    // 1024 * 1024 = 1MB
    // 5 * 1024 * 1024 = 5MB
  },
});

// ë‹¤ë¥¸ íŒŒì¼ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ export
module.exports = upload;
```

**í•µì‹¬ ê°œë…**:
- `multer.diskStorage()`: íŒŒì¼ì„ ë””ìŠ¤í¬ì— ì €ì¥
- `destination`: ì €ì¥ ê²½ë¡œ
- `filename`: ì¤‘ë³µ ë°©ì§€ë¥¼ ìœ„í•´ íƒ€ì„ìŠ¤íƒ¬í”„ + ëœë¤ê°’ ì‚¬ìš©
- `fileFilter`: MIME íƒ€ì…ìœ¼ë¡œ ì´ë¯¸ì§€ë§Œ í—ˆìš©
- `limits`: íŒŒì¼ í¬ê¸° ì œí•œ (5MB)

---

### 2ï¸âƒ£ Post ëª¨ë¸ ìˆ˜ì • (`backend/models/Post.js`)

**ë³€ê²½ì‚¬í•­**: `images` í•„ë“œ ì¶”ê°€

```javascript
const mongoose = require("mongoose");

// ê²Œì‹œë¬¼ ìŠ¤í‚¤ë§ˆ ì •ì˜
const postSchema = new mongoose.Schema({
  title: {
    type: String,
    required: [true, "ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"],
    trim: true,
    maxlength: [100, "ì œëª©ì€ 100ì ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤"],
  },
  content: {
    type: String,
    required: [true, "ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"],
  },
  author: {
    type: mongoose.Schema.Types.ObjectId,
    ref: "User",
    required: [true, "ì‘ì„±ìê°€ í•„ìš”í•©ë‹ˆë‹¤"],
  },
  
  // ============================================================
  // ğŸ†• ì´ë¯¸ì§€ URL ë°°ì—´ í•„ë“œ
  // ============================================================
  images: [
    {
      type: String, // ì´ë¯¸ì§€ URL ë¬¸ìì—´
      // ì˜ˆ: "/uploads/photo-1735477890123-987654321.jpg"
    },
  ],
  // ë°°ì—´ì´ë¯€ë¡œ ì—¬ëŸ¬ ì´ë¯¸ì§€ë¥¼ ì €ì¥ ê°€ëŠ¥
  // ì‹¤ì œ íŒŒì¼ì€ ì„œë²„ì˜ uploads/ í´ë”ì— ì €ì¥ë˜ê³ 
  // DBì—ëŠ” íŒŒì¼ ê²½ë¡œ(URL)ë§Œ ì €ì¥ (ìš©ëŸ‰ ì ˆì•½)
  
  likes: [
    {
      type: mongoose.Schema.Types.ObjectId,
      ref: "User",
    },
  ],
  createdAt: {
    type: Date,
    default: Date.now,
  },
  updatedAt: {
    type: Date,
    default: Date.now,
  },
});

module.exports = mongoose.model("Post", postSchema);
```

**ì™œ íŒŒì¼ì´ ì•„ë‹Œ URLì„ ì €ì¥í•˜ë‚˜ìš”?**
- íŒŒì¼ì„ DBì— ì €ì¥í•˜ë©´ DB í¬ê¸°ê°€ ê¸‰ê²©íˆ ì¦ê°€
- íŒŒì¼ ì‹œìŠ¤í…œì´ íŒŒì¼ ì €ì¥ì— ìµœì í™”ë˜ì–´ ìˆìŒ
- URLë§Œ ì €ì¥í•˜ê³  ì‹¤ì œ íŒŒì¼ì€ `uploads/` í´ë”ì— ì €ì¥

---

### 3ï¸âƒ£ ê²Œì‹œë¬¼ ì‘ì„± API (`backend/routes/posts.js`)

**ë³€ê²½ì‚¬í•­**: Multer ë¯¸ë“¤ì›¨ì–´ ì¶”ê°€ & ì´ë¯¸ì§€ URL ìƒì„±

```javascript
const express = require("express");
const router = express.Router();
const jwt = require("jsonwebtoken");
const Post = require("../models/Post");
const User = require("../models/User");
const upload = require("../middleware/upload"); // ğŸ†• Multer ë¯¸ë“¤ì›¨ì–´ import

// ============================================================
// @route   POST /api/posts
// @desc    ê²Œì‹œë¬¼ ì‘ì„± (ì´ë¯¸ì§€ ì—…ë¡œë“œ í¬í•¨)
// @access  Private (ë¡œê·¸ì¸ í•„ìš”)
// ============================================================
router.post("/", upload.array("images", 5), async (req, res) => {
  //            â†‘ í•µì‹¬! Multer ë¯¸ë“¤ì›¨ì–´
  //            - "images"ë¼ëŠ” ì´ë¦„ì˜ íŒŒì¼ í•„ë“œì—ì„œ ìµœëŒ€ 5ê°œ íŒŒì¼ ë°›ìŒ
  //            - í”„ë¡ íŠ¸ì—ì„œ FormData.append("images", file) í˜•ì‹ìœ¼ë¡œ ë³´ë‚´ì•¼ í•¨
  //            - íŒŒì¼ ì²˜ë¦¬ í›„ req.filesì— ì •ë³´ ì €ì¥
  
  // ============================================================
  // 1ï¸âƒ£ ì¸ì¦ ì²´í¬ (JWT í† í° ê²€ì¦)
  // ============================================================
  const authHeader = req.headers.authorization;
  // "Authorization: Bearer eyJhbGci..." í˜•ì‹
  
  if (!authHeader || !authHeader.startsWith("Bearer ")) {
    return res.status(401).json({
      success: false,
      message: "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤",
    });
  }

  const token = authHeader.split(" ")[1]; // "Bearer " ì œê±°
  let userId;

  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    // JWT í† í° ê²€ì¦ & ë””ì½”ë”©
    // decoded = { id: "user_id", iat: 123456, exp: 789012 }
    
    userId = decoded.id; // ì‚¬ìš©ì ID ì¶”ì¶œ
  } catch (error) {
    return res.status(401).json({
      success: false,
      message: "ìœ íš¨í•˜ì§€ ì•Šì€ í† í°ì…ë‹ˆë‹¤",
    });
  }

  // ============================================================
  // 2ï¸âƒ£ ê²Œì‹œë¬¼ ìƒì„±
  // ============================================================
  try {
    const { title, content } = req.body;
    // FormDataì˜ í…ìŠ¤íŠ¸ í•„ë“œëŠ” req.bodyì—ì„œ ê°€ì ¸ì˜´

    if (!title || !content) {
      return res.status(400).json({
        success: false,
        message: "ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”",
      });
    }

    // ============================================================
    // 3ï¸âƒ£ ì—…ë¡œë“œëœ íŒŒì¼ ì •ë³´ â†’ URL ë°°ì—´ë¡œ ë³€í™˜
    // ============================================================
    // Multerê°€ íŒŒì¼ ì²˜ë¦¬ í›„ req.filesì— ì €ì¥
    // req.files = [
    //   {
    //     fieldname: 'images',
    //     originalname: 'photo.jpg',
    //     filename: 'photo-1735477890123-987654321.jpg',
    //     path: '/path/to/uploads/photo-1735477890123-987654321.jpg',
    //     size: 245678
    //   },
    //   { ... } // ë‘ ë²ˆì§¸ íŒŒì¼
    // ]
    
    const images = req.files
      ? req.files.map((file) => \`/uploads/\${file.filename}\`)
      : [];
    // map(): ê° íŒŒì¼ì˜ filenameì„ URL ê²½ë¡œë¡œ ë³€í™˜
    // ê²°ê³¼: ["/uploads/photo-1735477890123.jpg", "/uploads/photo-9876543210.jpg"]

    // ============================================================
    // 4ï¸âƒ£ MongoDBì— ê²Œì‹œë¬¼ ì €ì¥
    // ============================================================
    const post = await Post.create({
      title,
      content,
      images, // ğŸ†• ì´ë¯¸ì§€ URL ë°°ì—´
      author: userId, // ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ID (í† í°ì—ì„œ ì¶”ì¶œ)
    });

    res.status(201).json({
      success: true,
      message: "ê²Œì‹œë¬¼ì´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤",
      data: { post },
    });
  } catch (error) {
    console.error("ê²Œì‹œë¬¼ ì‘ì„± ì—ëŸ¬:", error.stack);
    res.status(500).json({
      success: false,
      message: "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤",
      error: error.message,
    });
  }
});

module.exports = router;
```

**í•µì‹¬ í¬ì¸íŠ¸**:
- `upload.array("images", 5)`: ë¯¸ë“¤ì›¨ì–´ë¡œ ë¨¼ì € ì‹¤í–‰ â†’ íŒŒì¼ ì²˜ë¦¬ â†’ `req.files`ì— ì €ì¥
- `req.body`: í…ìŠ¤íŠ¸ í•„ë“œ (title, content)
- `req.files`: ì—…ë¡œë“œëœ íŒŒì¼ ë°°ì—´
- `images` í•„ë“œëª…ì€ í”„ë¡ íŠ¸ì—”ë“œ FormDataì™€ ì¼ì¹˜í•´ì•¼ í•¨!

---

### 4ï¸âƒ£ ì •ì  íŒŒì¼ ì„œë¹™ (`backend/index.js`)

**ë³€ê²½ì‚¬í•­**: `/uploads` ê²½ë¡œë¡œ ì´ë¯¸ì§€ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •

```javascript
const express = require("express");
const mongoose = require("mongoose");
const cors = require("cors");
const path = require("path"); // ğŸ†• ê²½ë¡œ ì²˜ë¦¬ë¥¼ ìœ„í•œ path ëª¨ë“ˆ
require("dotenv").config();

const app = express();
const PORT = process.env.PORT || 3001;

// CORS ì„¤ì •
app.use(cors());
app.use(express.json());

// ============================================================
// ğŸ†• ì •ì  íŒŒì¼ ì œê³µ (ì—…ë¡œë“œëœ ì´ë¯¸ì§€)
// ============================================================
app.use("/uploads", express.static(path.join(__dirname, "uploads")));
//      â†‘ URL ê²½ë¡œ    â†‘ ë¯¸ë“¤ì›¨ì–´         â†‘ ì‹¤ì œ í´ë” ê²½ë¡œ

// ë™ì‘ ë°©ì‹:
// 1. í´ë¼ì´ì–¸íŠ¸ ìš”ì²­: GET http://localhost:3001/uploads/photo-123.jpg
// 2. Expressê°€ "/uploads" ê²½ë¡œ ì¸ì‹
// 3. "photo-123.jpg" ì¶”ì¶œ
// 4. backend/uploads/photo-123.jpg íŒŒì¼ ê²€ìƒ‰
// 5. íŒŒì¼ ì¡´ì¬ â†’ íŒŒì¼ ë‚´ìš© ì‘ë‹µ (200 OK)
//    íŒŒì¼ ì—†ìŒ â†’ 404 Not Found

// express.static(): ì •ì  íŒŒì¼(ì´ë¯¸ì§€, CSS, JS ë“±)ì„ ì œê³µí•˜ëŠ” ë¯¸ë“¤ì›¨ì–´
// path.join(__dirname, "uploads"): /Users/.../Blog/backend/uploads

// ì˜ˆì‹œ:
// ìš”ì²­: http://localhost:3001/uploads/photo-123.jpg
// ì‘ë‹µ: backend/uploads/photo-123.jpg íŒŒì¼ì˜ ë°”ì´ë„ˆë¦¬ ë°ì´í„°
```

**ì •ì  íŒŒì¼ ì„œë¹™ì´ë€?**
- ì„œë²„ì˜ íŒŒì¼ì„ HTTPë¡œ ì§ì ‘ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ ë§Œë“œëŠ” ê²ƒ
- `express.static()`ì´ ìë™ìœ¼ë¡œ íŒŒì¼ì„ ì½ì–´ì„œ ì‘ë‹µ
- ë³„ë„ì˜ ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ ì‘ì„± ë¶ˆí•„ìš”

---

## ğŸ’» í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ (ìƒì„¸ ì£¼ì„ í¬í•¨)

### 1ï¸âƒ£ ê²Œì‹œë¬¼ ì‘ì„± í¼ (`frontend/src/components/PostCreate.jsx`)

**ë³€ê²½ì‚¬í•­**: ì´ë¯¸ì§€ ì„ íƒ, ë¯¸ë¦¬ë³´ê¸°, FormData ì „ì†¡

```jsx
import { useState } from "react";
import { useNavigate } from "react-router-dom";
import { createPost } from "../api";

function PostCreate() {
  const navigate = useNavigate();
  
  // ============================================================
  // State ì •ì˜
  // ============================================================
  const [formData, setFormData] = useState({
    title: "",
    content: "",
  });
  
  // ğŸ†• ì´ë¯¸ì§€ ê´€ë ¨ state
  const [images, setImages] = useState([]); // ì‹¤ì œ File ê°ì²´ ë°°ì—´
  // File ê°ì²´: ë¸Œë¼ìš°ì €ê°€ íŒŒì¼ì„ í‘œí˜„í•˜ëŠ” ê°ì²´
  // ì˜ˆ: File { name: "photo.jpg", size: 245678, type: "image/jpeg" }
  
  const [imagePreviews, setImagePreviews] = useState([]); // ë¯¸ë¦¬ë³´ê¸° URL ë°°ì—´
  // ë¯¸ë¦¬ë³´ê¸° URL: blob:http://localhost:5173/abc-123-def
  // ë¸Œë¼ìš°ì € ë©”ëª¨ë¦¬ì—ë§Œ ì¡´ì¬í•˜ëŠ” ì„ì‹œ URL
  
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState("");

  // ============================================================
  // í…ìŠ¤íŠ¸ í•„ë“œ ë³€ê²½ í•¸ë“¤ëŸ¬
  // ============================================================
  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value,
    });
  };

  // ============================================================
  // ğŸ†• ì´ë¯¸ì§€ ì„ íƒ í•¸ë“¤ëŸ¬
  // ============================================================
  const handleImageChange = (e) => {
    // e.target.files: FileList ê°ì²´ (ìœ ì‚¬ ë°°ì—´)
    // FileList { 0: File, 1: File, length: 2 }
    
    const files = Array.from(e.target.files);
    // Array.from(): FileListë¥¼ ì‹¤ì œ ë°°ì—´ë¡œ ë³€í™˜
    // [File, File]
    
    // ============================================================
    // 1ï¸âƒ£ ìµœëŒ€ 5ê°œ ì œí•œ
    // ============================================================
    if (files.length + images.length > 5) {
      setError("ì´ë¯¸ì§€ëŠ” ìµœëŒ€ 5ê°œê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
      return;
    }

    // ============================================================
    // 2ï¸âƒ£ íŒŒì¼ í¬ê¸° ì²´í¬ (ê° 5MB ì´í•˜)
    // ============================================================
    const oversizedFiles = files.filter((file) => file.size > 5 * 1024 * 1024);
    // filter(): 5MB ì´ˆê³¼ íŒŒì¼ë§Œ ì¶”ì¶œ
    
    if (oversizedFiles.length > 0) {
      setError("ì´ë¯¸ì§€ëŠ” 5MB ì´í•˜ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
      return;
    }

    setError("");
    
    // ============================================================
    // 3ï¸âƒ£ ê¸°ì¡´ ì´ë¯¸ì§€ì— ìƒˆ ì´ë¯¸ì§€ ì¶”ê°€
    // ============================================================
    setImages([...images, ...files]);
    // ìŠ¤í”„ë ˆë“œ ì—°ì‚°ì(...)ë¡œ ë°°ì—´ ë³‘í•©
    // ê¸°ì¡´: [File1, File2]
    // ìƒˆë¡œ: [File3, File4]
    // ê²°ê³¼: [File1, File2, File3, File4]

    // ============================================================
    // 4ï¸âƒ£ ë¯¸ë¦¬ë³´ê¸° URL ìƒì„±
    // ============================================================
    const newPreviews = files.map((file) => URL.createObjectURL(file));
    // URL.createObjectURL(file):
    // - File ê°ì²´ë¥¼ ë¸Œë¼ìš°ì €ì—ì„œ í‘œì‹œ ê°€ëŠ¥í•œ URLë¡œ ë³€í™˜
    // - ê²°ê³¼: "blob:http://localhost:5173/abc-123-def"
    // - ë©”ëª¨ë¦¬ì—ë§Œ ì¡´ì¬ (ì‹¤ì œ íŒŒì¼ì€ ì„œë²„ ì—…ë¡œë“œ ì „)
    // - í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ì‚¬ë¼ì§
    
    setImagePreviews([...imagePreviews, ...newPreviews]);
  };

  // ============================================================
  // ğŸ†• ì´ë¯¸ì§€ ì‚­ì œ í•¸ë“¤ëŸ¬
  // ============================================================
  const handleRemoveImage = (index) => {
    // index: ì‚­ì œí•  ì´ë¯¸ì§€ì˜ ì¸ë±ìŠ¤
    
    const newImages = images.filter((_, i) => i !== index);
    const newPreviews = imagePreviews.filter((_, i) => i !== index);
    // filter(): í•´ë‹¹ ì¸ë±ìŠ¤ë¥¼ ì œì™¸í•œ ìƒˆ ë°°ì—´ ìƒì„±
    
    // ============================================================
    // ğŸ”¥ ë©”ëª¨ë¦¬ í•´ì œ (ì¤‘ìš”!)
    // ============================================================
    URL.revokeObjectURL(imagePreviews[index]);
    // blob URLì„ ë©”ëª¨ë¦¬ì—ì„œ ì œê±°
    // ì•ˆ í•˜ë©´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°œìƒ!
    // íŠ¹íˆ ì´ë¯¸ì§€ë¥¼ ì—¬ëŸ¬ ë²ˆ ì¶”ê°€/ì‚­ì œí•˜ë©´ ë©”ëª¨ë¦¬ ë¶€ì¡± ê°€ëŠ¥
    
    setImages(newImages);
    setImagePreviews(newPreviews);
  };

  // ============================================================
  // ê²Œì‹œë¬¼ ì œì¶œ í•¸ë“¤ëŸ¬
  // ============================================================
  const handleSubmit = async (e) => {
    e.preventDefault();
    setError("");

    if (!formData.title.trim() || !formData.content.trim()) {
      setError("ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      return;
    }

    try {
      setLoading(true);
      
      // ============================================================
      // ğŸ†• FormData ìƒì„± (JSON ëŒ€ì‹  ì‚¬ìš©)
      // ============================================================
      const data = new FormData();
      // FormData: íŒŒì¼ + í…ìŠ¤íŠ¸ë¥¼ í•¨ê»˜ ì „ì†¡í•˜ëŠ” í˜•ì‹
      // JSONì€ íŒŒì¼ ì „ì†¡ ë¶ˆê°€ âŒ
      
      // 1ï¸âƒ£ í…ìŠ¤íŠ¸ í•„ë“œ ì¶”ê°€
      data.append("title", formData.title);
      data.append("content", formData.content);
      // append(í‚¤, ê°’): ë°ì´í„° ì¶”ê°€
      
      // 2ï¸âƒ£ ì´ë¯¸ì§€ íŒŒì¼ ì¶”ê°€ (ê°™ì€ í‚¤ë¡œ ì—¬ëŸ¬ ê°œ)
      images.forEach((image) => {
        data.append("images", image);
        // "images"ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì¶”ê°€
        // ë°±ì—”ë“œì˜ upload.array("images", 5)ì™€ ì´ë¦„ ì¼ì¹˜ í•„ìˆ˜!
      });
      
      // ìµœì¢… FormData ë‚´ìš©:
      // FormData {
      //   title: "ì‚¬ì§„ í…ŒìŠ¤íŠ¸",
      //   content: "ë‚´ìš©ì…ë‹ˆë‹¤",
      //   images: File { name: "photo1.jpg", ... },
      //   images: File { name: "photo2.jpg", ... },
      // }

      // ============================================================
      // 3ï¸âƒ£ API í˜¸ì¶œ (FormData ì „ì†¡)
      // ============================================================
      const result = await createPost(data);
      // createPost()ê°€ FormDataë¥¼ ê°ì§€í•˜ê³  ì ì ˆí•œ Content-Type ì„¤ì •

      if (result.success) {
        // ============================================================
        // ğŸ”¥ ëª¨ë“  blob URL ë©”ëª¨ë¦¬ í•´ì œ
        // ============================================================
        imagePreviews.forEach((url) => URL.revokeObjectURL(url));
        
        navigate("/posts"); // ëª©ë¡ í˜ì´ì§€ë¡œ ì´ë™
      }
    } catch (err) {
      if (err.response?.status === 401) {
        setError("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
        setTimeout(() => navigate("/login"), 2000);
      } else {
        setError(err.response?.data?.message || "ê²Œì‹œë¬¼ ì‘ì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
      }
      console.error(err);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-8 px-4">
      <div className="bg-white rounded-2xl shadow-xl p-6 sm:p-8 w-full max-w-3xl">
        <h1 className="text-3xl font-bold text-gray-800 mb-6 text-center">
          âœï¸ ê²Œì‹œë¬¼ ì‘ì„±
        </h1>

        {error && (
          <div className="bg-red-50 text-red-600 p-4 rounded-lg mb-4">
            {error}
          </div>
        )}

        <form onSubmit={handleSubmit} className="space-y-4">
          {/* ì œëª© ì…ë ¥ */}
          <div>
            <label className="block text-gray-700 font-semibold mb-2">
              ì œëª©
            </label>
            <input
              type="text"
              name="title"
              value={formData.title}
              onChange={handleChange}
              placeholder="ê²Œì‹œë¬¼ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"
              className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              maxLength={100}
            />
            <p className="text-sm text-gray-500 mt-1">
              {formData.title.length}/100
            </p>
          </div>

          {/* ë‚´ìš© ì…ë ¥ */}
          <div>
            <label className="block text-gray-700 font-semibold mb-2">
              ë‚´ìš©
            </label>
            <textarea
              name="content"
              value={formData.content}
              onChange={handleChange}
              placeholder="ê²Œì‹œë¬¼ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"
              rows={12}
              className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"
            />
          </div>

          {/* ========================================================== */}
          {/* ğŸ†• ì´ë¯¸ì§€ ì—…ë¡œë“œ UI */}
          {/* ========================================================== */}
          <div>
            <label className="block text-gray-700 font-semibold mb-2">
              ì´ë¯¸ì§€ ({images.length}/5)
            </label>
            
            {/* íŒŒì¼ input (ìˆ¨ê¹€ ì²˜ë¦¬) */}
            <input
              type="file"
              accept="image/*"  // ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì„ íƒ ê°€ëŠ¥
              multiple           // ì—¬ëŸ¬ ê°œ ì„ íƒ ê°€ëŠ¥
              onChange={handleImageChange}
              className="hidden" // ê¸°ë³¸ ìŠ¤íƒ€ì¼ ìˆ¨ê¹€
              id="image-upload"
            />
            
            {/* ì»¤ìŠ¤í…€ ì—…ë¡œë“œ ë²„íŠ¼ */}
            <label
              htmlFor="image-upload"
              // labelì˜ htmlForê°€ inputì˜ idì™€ ì—°ê²°ë¨
              // label í´ë¦­ â†’ input ì‹¤í–‰
              className="flex items-center justify-center w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition"
            >
              <span className="text-gray-600">
                ğŸ“· ì´ë¯¸ì§€ ì„ íƒ (ìµœëŒ€ 5ê°œ, ê° 5MB ì´í•˜)
              </span>
            </label>

            {/* ========================================================== */}
            {/* ğŸ†• ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ê·¸ë¦¬ë“œ */}
            {/* ========================================================== */}
            {imagePreviews.length > 0 && (
              <div className="grid grid-cols-2 sm:grid-cols-3 gap-3 mt-3">
                {imagePreviews.map((preview, index) => (
                  <div key={index} className="relative group">
                    {/* ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ */}
                    <img
                      src={preview}
                      // preview: "blob:http://localhost:5173/abc-123"
                      alt={\`ë¯¸ë¦¬ë³´ê¸° \${index + 1}\`}
                      className="w-full h-32 object-cover rounded-lg border border-gray-200"
                    />
                    
                    {/* ì‚­ì œ ë²„íŠ¼ (hover ì‹œ í‘œì‹œ) */}
                    <button
                      type="button"
                      onClick={() => handleRemoveImage(index)}
                      className="absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition"
                      // opacity-0: ê¸°ë³¸ ìˆ¨ê¹€
                      // group-hover:opacity-100: ë¶€ëª¨ì— hover ì‹œ í‘œì‹œ
                    >
                      Ã—
                    </button>
                  </div>
                ))}
              </div>
            )}
          </div>

          {/* ë²„íŠ¼ ê·¸ë£¹ */}
          <div className="flex space-x-3">
            <button
              type="button"
              onClick={() => navigate("/posts")}
              className="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 rounded-lg transition duration-200"
              disabled={loading}
            >
              ì·¨ì†Œ
            </button>
            <button
              type="submit"
              className="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 rounded-lg transition duration-200 disabled:bg-gray-400"
              disabled={loading}
            >
              {loading ? "ì‘ì„± ì¤‘..." : "ì‘ì„±í•˜ê¸°"}
            </button>
          </div>
        </form>
      </div>
    </div>
  );
}

export default PostCreate;
```

**í•µì‹¬ í¬ì¸íŠ¸**:
- `File` ê°ì²´: ì‹¤ì œ íŒŒì¼ ë°ì´í„°
- `URL.createObjectURL()`: ë¯¸ë¦¬ë³´ê¸° URL ìƒì„± (ë©”ëª¨ë¦¬)
- `FormData`: íŒŒì¼ + í…ìŠ¤íŠ¸ í˜¼í•© ì „ì†¡
- `URL.revokeObjectURL()`: ë©”ëª¨ë¦¬ í•´ì œ í•„ìˆ˜!

---

### 2ï¸âƒ£ API í•¨ìˆ˜ ìˆ˜ì • (`frontend/src/api.js`)

**ë³€ê²½ì‚¬í•­**: FormData ì²˜ë¦¬ & Content-Type ìë™ ì„¤ì •

```javascript
import axios from "axios";

const API_URL = import.meta.env.VITE_API_URL || "http://localhost:3001";

// ============================================================
// Axios ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
// ============================================================
const api = axios.create({
  baseURL: \`\${API_URL}/api\`,
  timeout: 30000,
  // âŒ Content-Type ì œê±°! (FormData ë•Œë¬¸)
  // ê¸°ì¡´: headers: { "Content-Type": "application/json" }
  // ë¬¸ì œ: FormData ì „ì†¡ ì‹œ multipart/form-dataë¡œ ìë™ ì„¤ì •ë˜ì–´ì•¼ í•˜ëŠ”ë°
  //       application/jsonì´ ë®ì–´ì”Œì›Œì§
});

// ============================================================
// ê²Œì‹œë¬¼ ì‘ì„± í•¨ìˆ˜
// ============================================================
export const createPost = async (postData) => {
  const token = localStorage.getItem("token");
  
  // ============================================================
  // FormDataì¸ì§€ í™•ì¸
  // ============================================================
  const isFormData = postData instanceof FormData;
  // instanceof: ê°ì²´ì˜ íƒ€ì… í™•ì¸
  // true: FormData ê°ì²´
  // false: ì¼ë°˜ ê°ì²´ (JSON)
  
  const response = await api.post("/posts", postData, {
    headers: {
      Authorization: \`Bearer \${token}\`,
      // ============================================================
      // Content-Type ì¡°ê±´ë¶€ ì„¤ì •
      // ============================================================
      ...(isFormData ? {} : { "Content-Type": "application/json" }),
      // ìŠ¤í”„ë ˆë“œ ì—°ì‚°ì(...)ë¡œ ì¡°ê±´ë¶€ ì¶”ê°€
      
      // FormDataì¸ ê²½ìš°:
      // - Content-Type í—¤ë” ì¶”ê°€ ì•ˆ í•¨ (ë¹ˆ ê°ì²´)
      // - ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ ì„¤ì •
      //   "multipart/form-data; boundary=----WebKitFormBoundary..."
      // - boundary: FormDataì˜ ê° í•­ëª©ì„ êµ¬ë¶„í•˜ëŠ” êµ¬ë¶„ì
      
      // JSONì¸ ê²½ìš°:
      // - Content-Type: application/json ëª…ì‹œ
    },
  });
  
  return response.data;
};
```

**ì™œ Content-Typeì„ ì œê±°í–ˆë‚˜ìš”?**

1. **FormData ì „ì†¡ ì‹œ**:
   - ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ `Content-Type: multipart/form-data; boundary=...` ì„¤ì •
   - `boundary`ëŠ” ê° ë°ì´í„°ë¥¼ êµ¬ë¶„í•˜ëŠ” ê³ ìœ  ë¬¸ìì—´
   - ìš°ë¦¬ê°€ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•˜ë©´ `boundary`ê°€ ì—†ì–´ì„œ ì„œë²„ê°€ íŒŒì‹± ëª» í•¨

2. **JSON ì „ì†¡ ì‹œ**:
   - `Content-Type: application/json` ëª…ì‹œ í•„ìš”

**ì „ì†¡ í˜•ì‹ ë¹„êµ**:
```
// FormData (multipart/form-data)
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="title"

ì‚¬ì§„ í…ŒìŠ¤íŠ¸
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="images"; filename="photo.jpg"
Content-Type: image/jpeg

(ë°”ì´ë„ˆë¦¬ ë°ì´í„°...)
------WebKitFormBoundary7MA4YWxkTrZu0gW--

// JSON (application/json)
{
  "title": "ì‚¬ì§„ í…ŒìŠ¤íŠ¸",
  "content": "ë‚´ìš©ì…ë‹ˆë‹¤"
}
```

---

### 3ï¸âƒ£ ê²Œì‹œë¬¼ ìƒì„¸ í˜ì´ì§€ (`frontend/src/components/PostDetail.jsx`)

**ë³€ê²½ì‚¬í•­**: ì´ë¯¸ì§€ ê·¸ë¦¬ë“œ í‘œì‹œ

```jsx
{/* ========================================================== */}
{/* ğŸ†• ì´ë¯¸ì§€ í‘œì‹œ ì„¹ì…˜ */}
{/* ========================================================== */}
{post.images && post.images.length > 0 && (
  <div className="mb-6">
    {/* ì´ë¯¸ì§€ê°€ 1ê°œë©´ í° ì´ë¯¸ì§€ë¡œ í‘œì‹œ */}
    {post.images.length === 1 ? (
      <img
        src={\`\${import.meta.env.VITE_API_URL || "http://localhost:3001"}\${post.images[0]}\`}
        // â†‘ í™˜ê²½ë³€ìˆ˜ (ì„œë²„ ì£¼ì†Œ)    â†‘ ì´ë¯¸ì§€ ê²½ë¡œ
        // VITE_API_URL: "http://localhost:3001"
        // post.images[0]: "/uploads/photo-123.jpg"
        // ê²°ê³¼: "http://localhost:3001/uploads/photo-123.jpg"
        
        alt="ê²Œì‹œë¬¼ ì´ë¯¸ì§€"
        className="w-full rounded-lg"
      />
    ) : (
      /* ì´ë¯¸ì§€ê°€ 2ê°œ ì´ìƒì´ë©´ 2ì—´ ê·¸ë¦¬ë“œë¡œ í‘œì‹œ */
      <div className="grid grid-cols-2 gap-3">
        {/* grid-cols-2: 2ì—´ ê·¸ë¦¬ë“œ */}
        {/* gap-3: ì´ë¯¸ì§€ ê°„ ê°„ê²© */}
        
        {post.images.map((image, index) => (
          <img
            key={index}
            src={\`\${import.meta.env.VITE_API_URL || "http://localhost:3001"}\${image}\`}
            alt={\`ê²Œì‹œë¬¼ ì´ë¯¸ì§€ \${index + 1}\`}
            className="w-full h-48 object-cover rounded-lg"
            // object-cover: ì´ë¯¸ì§€ ë¹„ìœ¨ ìœ ì§€í•˜ë©° ì˜ì—­ ì±„ìš°ê¸°
            // h-48: ê³ ì • ë†’ì´ (192px)
          />
        ))}
      </div>
    )}
  </div>
)}
```

**URL ì¡°í•© ë°©ì‹**:
```javascript
í™˜ê²½ë³€ìˆ˜ + ì´ë¯¸ì§€ ê²½ë¡œ
"http://localhost:3001" + "/uploads/photo-123.jpg"
= "http://localhost:3001/uploads/photo-123.jpg"

// ì„œë²„ì˜ express.static()ì´ ì´ ìš”ì²­ ì²˜ë¦¬
// backend/uploads/photo-123.jpg íŒŒì¼ ì‘ë‹µ
```

---

### 4ï¸âƒ£ ê²Œì‹œë¬¼ ëª©ë¡ (`frontend/src/components/PostList.jsx`)

**ë³€ê²½ì‚¬í•­**: ì¸ë„¤ì¼ ì´ë¯¸ì§€ í‘œì‹œ

```jsx
{posts.map((post) => (
  <div key={post._id} className="border rounded-lg p-5">
    <div onClick={() => navigate(\`/posts/\${post._id}\`)}>
      
      {/* ========================================================== */}
      {/* ğŸ†• ì´ë¯¸ì§€ ì¸ë„¤ì¼ (ì²« ë²ˆì§¸ ì´ë¯¸ì§€ë§Œ) */}
      {/* ========================================================== */}
      {post.images && post.images.length > 0 && (
        <img
          src={\`\${import.meta.env.VITE_API_URL || "http://localhost:3001"}\${post.images[0]}\`}
          // post.images[0]: ì²« ë²ˆì§¸ ì´ë¯¸ì§€ë§Œ ì‚¬ìš©
          alt={post.title}
          className="w-full h-40 object-cover rounded-lg mb-3"
          // w-full: ì¹´ë“œ ë„ˆë¹„ì— ë§ì¶¤
          // h-40: ê³ ì • ë†’ì´ (160px) â†’ ëª¨ë“  ì¸ë„¤ì¼ ë†’ì´ í†µì¼
          // object-cover: ë¹„ìœ¨ ìœ ì§€í•˜ë©° ì˜ì—­ ì±„ìš°ê¸°
          // mb-3: ì•„ë˜ ì—¬ë°± (ì œëª©ê³¼ ê°„ê²©)
        />
      )}

      <h2 className="text-lg font-bold">{post.title}</h2>
      <p className="text-gray-600">
        {post.content.length > 150
          ? post.content.substring(0, 150) + "..."
          : post.content}
      </p>
    </div>
  </div>
))}
```

**ì¸ë„¤ì¼ ë””ìì¸ í¬ì¸íŠ¸**:
- `h-40`: ê³ ì • ë†’ì´ë¡œ ëª¨ë“  ì¹´ë“œ í†µì¼ê°
- `object-cover`: ì´ë¯¸ì§€ ì°Œê·¸ëŸ¬ì§ ë°©ì§€
- `post.images[0]`: ì²« ë²ˆì§¸ ì´ë¯¸ì§€ë§Œ í‘œì‹œ

---

## ğŸ”„ ì „ì²´ ë°ì´í„° íë¦„

```
1ï¸âƒ£ ì‚¬ìš©ìê°€ ì´ë¯¸ì§€ íŒŒì¼ ì„ íƒ
   â†“
2ï¸âƒ£ handleImageChange() ì‹¤í–‰
   - FileList â†’ Array ë³€í™˜
   - ê°œìˆ˜/í¬ê¸° ê²€ì¦
   - File ê°ì²´ë¥¼ images ë°°ì—´ì— ì €ì¥
   - URL.createObjectURL()ë¡œ ë¯¸ë¦¬ë³´ê¸° URL ìƒì„±
   â†“
3ï¸âƒ£ í™”ë©´ì— ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ (blob URL ì‚¬ìš©)
   â†“
4ï¸âƒ£ "ì‘ì„±í•˜ê¸°" ë²„íŠ¼ í´ë¦­
   â†“
5ï¸âƒ£ handleSubmit() ì‹¤í–‰
   - FormData ìƒì„±
   - title, content ì¶”ê°€
   - images ë°°ì—´ì˜ ê° File ê°ì²´ ì¶”ê°€
   â†“
6ï¸âƒ£ createPost(formData) í˜¸ì¶œ
   - axios POST /api/posts
   - Content-Type: multipart/form-data (ìë™ ì„¤ì •)
   - Authorization: Bearer {token}
   â†“
7ï¸âƒ£ ë°±ì—”ë“œ: Multer ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰
   - FormData íŒŒì‹±
   - íŒŒì¼ ì €ì¥: backend/uploads/photo-1735477890123.jpg
   - req.filesì— íŒŒì¼ ì •ë³´ ì €ì¥
   â†“
8ï¸âƒ£ ë°±ì—”ë“œ: POST /api/posts ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬
   - JWT í† í° ê²€ì¦ â†’ userId ì¶”ì¶œ
   - req.files â†’ images ë°°ì—´ ìƒì„±
   - Post.create({ title, content, images, author: userId })
   - MongoDBì— ì €ì¥
   â†“
9ï¸âƒ£ í”„ë¡ íŠ¸ì—”ë“œë¡œ ì‘ë‹µ
   {
     success: true,
     data: {
       post: {
         _id: "...",
         title: "ì‚¬ì§„ í…ŒìŠ¤íŠ¸",
         content: "ë‚´ìš©ì…ë‹ˆë‹¤",
         images: ["/uploads/photo-1735477890123.jpg"],
         author: "user_id",
         ...
       }
     }
   }
   â†“
ğŸ”Ÿ URL.revokeObjectURL() ì‹¤í–‰ (ë©”ëª¨ë¦¬ í•´ì œ)
   â†“
1ï¸âƒ£1ï¸âƒ£ /postsë¡œ ì´ë™ (ëª©ë¡ í˜ì´ì§€)
   â†“
1ï¸âƒ£2ï¸âƒ£ ëª©ë¡/ìƒì„¸ í˜ì´ì§€ì—ì„œ ì´ë¯¸ì§€ í‘œì‹œ
   - <img src="http://localhost:3001/uploads/photo-123.jpg">
   - ë°±ì—”ë“œ express.static()ì´ íŒŒì¼ ì œê³µ
```

---

## ğŸ’¡ í•µì‹¬ ê°œë… ì •ë¦¬

### 1. FormData
- **ìš©ë„**: íŒŒì¼ + í…ìŠ¤íŠ¸ í˜¼í•© ì „ì†¡
- **ìƒì„±**: \`const data = new FormData()\`
- **ì¶”ê°€**: \`data.append("key", value)\`
- **íŠ¹ì§•**: ê°™ì€ í‚¤ë¡œ ì—¬ëŸ¬ ê°œ ì¶”ê°€ ê°€ëŠ¥

### 2. File ê°ì²´
- **ì •ì˜**: ë¸Œë¼ìš°ì €ê°€ íŒŒì¼ì„ í‘œí˜„í•˜ëŠ” ê°ì²´
- **ì†ì„±**: \`name\`, \`size\`, \`type\`, \`lastModified\`
- **ìƒì„±**: íŒŒì¼ inputìœ¼ë¡œ ì„ íƒ ì‹œ ìë™ ìƒì„±

### 3. URL.createObjectURL()
- **ìš©ë„**: ë¡œì»¬ íŒŒì¼ì„ ë¸Œë¼ìš°ì €ì—ì„œ í‘œì‹œ
- **ê²°ê³¼**: \`blob:http://...\` í˜•ì‹ì˜ URL
- **ìˆ˜ëª…**: í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ ì‚¬ë¼ì§
- **í•´ì œ**: \`URL.revokeObjectURL()\` í•„ìˆ˜!

### 4. Multer
- **ì—­í• **: multipart/form-data íŒŒì‹±
- **ì €ì¥**: \`multer.diskStorage()\`
- **í•„í„°**: \`fileFilter\` í•¨ìˆ˜
- **ì œí•œ**: \`limits.fileSize\`

### 5. express.static()
- **ì—­í• **: ì •ì  íŒŒì¼ ì œê³µ
- **ì‚¬ìš©**: \`app.use("/uploads", express.static("uploads"))\`
- **ë™ì‘**: URL ê²½ë¡œ â†’ íŒŒì¼ ì‹œìŠ¤í…œ ë§¤í•‘

---

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**: \`images: Array(0)\`

**ì›ì¸**: axios ê¸°ë³¸ ì„¤ì •ì— \`Content-Type: application/json\` ê³ ì •

**í•´ê²°**:
\`\`\`javascript
// âŒ ë¬¸ì œ
const api = axios.create({
  headers: { "Content-Type": "application/json" }
});

// âœ… í•´ê²°
const api = axios.create({
  // Content-Type ì œê±° (ìš”ì²­ë§ˆë‹¤ ìë™ ì„¤ì •)
});
\`\`\`

### ë¬¸ì œ 2: ì´ë¯¸ì§€ê°€ í‘œì‹œë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**: 404 Not Found

**ì›ì¸**: í™˜ê²½ë³€ìˆ˜ ê²½ë¡œ ì˜¤ë¥˜

**í•´ê²°**:
\`\`\`javascript
// âŒ ì˜ëª»ëœ ì¡°í•©
VITE_API_URL=http://localhost:3001/api  // /api í¬í•¨
src=\`\${API_URL}\${post.images[0]}\`
// ê²°ê³¼: http://localhost:3001/api/uploads/photo.jpg (404)

// âœ… ì˜¬ë°”ë¥¸ ì¡°í•©  
VITE_API_URL=http://localhost:3001      // /api ì œì™¸
src=\`\${API_URL}\${post.images[0]}\`
// ê²°ê³¼: http://localhost:3001/uploads/photo.jpg (200)
\`\`\`

### ë¬¸ì œ 3: ë©”ëª¨ë¦¬ ëˆ„ìˆ˜

**ì›ì¸**: \`URL.createObjectURL()\` í•´ì œ ì•ˆ í•¨

**í•´ê²°**:
\`\`\`javascript
// âœ… ì‚¬ìš© í›„ í•´ì œ
const preview = URL.createObjectURL(file);
// ... ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ ...
URL.revokeObjectURL(preview);
\`\`\`

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë°±ì—”ë“œ
- [x] multer íŒ¨í‚¤ì§€ ì„¤ì¹˜
- [x] \`backend/middleware/upload.js\` ìƒì„±
- [x] Post ëª¨ë¸ì— \`images\` í•„ë“œ ì¶”ê°€
- [x] POST /api/postsì— \`upload.array("images", 5)\` ì¶”ê°€
- [x] \`app.use("/uploads", express.static(...))\` ì¶”ê°€

### í”„ë¡ íŠ¸ì—”ë“œ
- [x] PostCreate: \`images\`, \`imagePreviews\` state
- [x] PostCreate: \`handleImageChange()\` êµ¬í˜„
- [x] PostCreate: FormData ìƒì„± ë° ì „ì†¡
- [x] api.js: Content-Type ì¡°ê±´ë¶€ ì„¤ì •
- [x] PostDetail: ì´ë¯¸ì§€ ê·¸ë¦¬ë“œ í‘œì‹œ
- [x] PostList: ì¸ë„¤ì¼ í‘œì‹œ

---

## ğŸ¯ ìµœì¢… ì •ë¦¬

**ì´ë¯¸ì§€ ì—…ë¡œë“œì˜ í•µì‹¬**:
1. í”„ë¡ íŠ¸: File ê°ì²´ â†’ FormData â†’ axios ì „ì†¡
2. ë°±ì—”ë“œ: Multer íŒŒì‹± â†’ íŒŒì¼ ì €ì¥ â†’ URL DB ì €ì¥
3. í‘œì‹œ: URL ì¡°í•© â†’ express.static() â†’ ì´ë¯¸ì§€ ì‘ë‹µ

**ì™œ ì´ë ‡ê²Œ ë³µì¡í•œê°€ìš”?**:
- ë³´ì•ˆ: íŒŒì¼ íƒ€ì…/í¬ê¸° ê²€ì¦ í•„ìˆ˜
- íš¨ìœ¨: DBì— íŒŒì¼ ì €ì¥í•˜ë©´ ìš©ëŸ‰ í­ë°œ
- ì„±ëŠ¥: ì •ì  íŒŒì¼ ì„œë¹™ì´ ë¹ ë¦„
